
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ndiminterpolation module &#8212; HyperCAT API 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="plotting module" href="plotting.html" />
    <link rel="prev" title="morphology module" href="morphology.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="plotting module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="morphology.html" title="morphology module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HyperCAT API 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-ndiminterpolation">
<span id="ndiminterpolation-module"></span><h1>ndiminterpolation module<a class="headerlink" href="#module-ndiminterpolation" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ndiminterpolation.NdimInterpolation">
<em class="property">class </em><code class="descclassname">ndiminterpolation.</code><code class="descname">NdimInterpolation</code><span class="sig-paren">(</span><em>data</em>, <em>theta</em>, <em>order=1</em>, <em>mode='log'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndiminterpolation.html#NdimInterpolation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndiminterpolation.NdimInterpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>N-dimensional interpolation on data hypercubes.</p>
<p>Operates on image(index) coordinates. Multi-linear (default) or
cubic-spline (currently deactivated; needs more testing).</p>
<dl class="method">
<dt id="ndiminterpolation.NdimInterpolation.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>vector</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndiminterpolation.html#NdimInterpolation.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndiminterpolation.NdimInterpolation.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate in N dimensions, using mapping to image coordinates.</p>
</dd></dl>

<dl class="method">
<dt id="ndiminterpolation.NdimInterpolation.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>theta</em>, <em>order=1</em>, <em>mode='log'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndiminterpolation.html#NdimInterpolation.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndiminterpolation.NdimInterpolation.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an interpolator object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>n-dim array</em><em> or </em><em>1-d array</em>) – <p>Datacube to be interpolated. Sampled on a rectilinear grid
(it need not be regular!). ‘data’ is either an
n-dimensional array (hypercube), or a 1-dimensional
array. If hypercube, each axis corresponds to one of the
model parameters, and the index location along each axis
grows with the parameter value (the parameter values are
given in <cite>theta</cite>). If ‘data’ is a 1-d array of values, it
will be converted into the hypercube format. This means
that the order of entries in the 1-d array must be as if
constructed via looping over all axes, i.e.</p>
<pre class="code python literal-block">
<span class="name">counter</span> <span class="operator">=</span> <span class="literal number integer">0</span>
<span class="keyword">for</span> <span class="name">j0</span> <span class="operator word">in</span> <span class="name">theta</span><span class="punctuation">[</span><span class="literal number integer">0</span><span class="punctuation">]:</span>
    <span class="keyword">for</span> <span class="name">j1</span> <span class="operator word">in</span> <span class="name">theta</span><span class="punctuation">[</span><span class="literal number integer">1</span><span class="punctuation">]:</span>
        <span class="keyword">for</span> <span class="name">j2</span> <span class="operator word">in</span> <span class="name">theta</span><span class="punctuation">[</span><span class="literal number integer">2</span><span class="punctuation">]:</span>
            <span class="operator">…</span>
            <span class="name">hypercube</span><span class="punctuation">[</span><span class="name">j0</span><span class="punctuation">,</span><span class="name">j1</span><span class="punctuation">,</span><span class="name">j2</span><span class="punctuation">,</span><span class="operator">…</span><span class="punctuation">]</span> <span class="operator">=</span> <span class="name">onedarray</span><span class="punctuation">[</span><span class="name">counter</span><span class="punctuation">]</span>
            <span class="name">counter</span> <span class="operator">+=</span> <span class="literal number integer">1</span>
</pre>
</li>
<li><strong>theta</strong> (<em>list</em>) – <p>List of lists, each holding in ascending order the unique
values for one of the axes in <cite>data</cite> hypercube. Example:
for the CLUMPY models of AGN tori (Nenkova et al. 2008)</p>
<blockquote>
<div>theta = [{i}, {tv}, {q}, {N0}, {sig}, {Y}, {wave}]</div></blockquote>
<p>where the {.} are 1-d arrays of unique model parameter
values, e.g.</p>
<blockquote>
<div>{i} = array([0,10,20,30,40,50,60,70,80,90]) (degrees).</div></blockquote>
</li>
<li><strong>order</strong> (<em>int</em>) – Order of interpolation spline to be used. <code class="docutils literal notranslate"><span class="pre">order=1</span></code>
(default) is multi-linear interpolation, <code class="docutils literal notranslate"><span class="pre">order=3</span></code> is
cubic-spline (quite a bit slower, and not necessarily
better, especially for complicated n-dim
functions. <code class="docutils literal notranslate"><span class="pre">order=1</span></code> is recommended.</li>
<li><strong>mode</strong> (<em>str</em>) – <code class="docutils literal notranslate"><span class="pre">log</span></code> is default, and will take log10(data) first, which
severely improves the interpolation accuracy if the data
span many orders of magnitude. This is of course only
applicable if all entries in <cite>data</cite> are greater than
0. Any string other that <code class="docutils literal notranslate"><span class="pre">log</span></code> will keep <cite>data</cite> as-is.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">NdimInterpolation instance.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>General way to use ndiminterpolation</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># to be written</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ndiminterpolation.NdimInterpolation.get_coords">
<code class="descname">get_coords</code><span class="sig-paren">(</span><em>vec</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndiminterpolation.html#NdimInterpolation.get_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndiminterpolation.NdimInterpolation.get_coords" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Construct a full 2D matrix of coordinates in pixel-space from a</dt>
<dd>vector of coordinates in real space.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec</strong> (<em>tuple</em>) – Tuple of lenght len(self.theta), with each element either
a single value of theta_i (of the i-th parameter), or
itself a tuple (of arbitrary length). If an element of vec
is itself a tuple (of length m), then m*(n-1) combinations
of all parameters will be added to the resulting 2D matrix
of coordinates.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul>
<li><strong>coorinates_pix</strong> (<em>2D array</em>) – 2D array of coordinates in pixel space, on which then the
multi-dim interpolation can be performed.<p>Overall, A = np.prod([len(vec_i) for vec_i in vec])
coordinate sets, for B = len(self.theta) parameters, will
be generated, i.e. the returned coordinate matrix has
coordinates.shape = (A,B).</p>
</li>
<li><strong>shape_</strong> (<em>tuple</em>) – The shape tuple to reshape coords_pix with to obtain a
properly shaped interpolated array.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>
    <span class="n">array</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">size</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">]</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">theta</span>
    <span class="p">[</span><span class="n">array</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,),</span> <span class="n">array</span><span class="p">(</span><span class="mf">10.</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">26</span><span class="p">),</span> <span class="n">array</span><span class="p">(</span><span class="mf">100.</span><span class="p">,</span><span class="mi">126</span><span class="p">)]</span>

<span class="c1"># vector of real-space coordinate to interpolate self.data_hypercube on</span>
<span class="n">vec</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">18.</span><span class="p">,</span><span class="mf">110.</span><span class="p">)</span>

<span class="c1"># compute pixel-space vector matrix, and shape of resulting array</span>
<span class="n">coords_pix</span><span class="p">,</span> <span class="n">shape_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coords</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
</pre></div>
</div>
<p>Old example, rework it:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vec</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="mi">6</span><span class="p">)</span>
<span class="n">vectup</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="p">(</span><span class="n">e</span><span class="p">,)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">vec</span><span class="p">]</span>
   <span class="p">[(</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,)]</span>
<span class="n">coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">vectup</span><span class="p">)])</span>  <span class="c1"># in pixel space</span>
   <span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ndiminterpolation.NdimInterpolation.serialize_vector">
<code class="descname">serialize_vector</code><span class="sig-paren">(</span><em>vector</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndiminterpolation.html#NdimInterpolation.serialize_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndiminterpolation.NdimInterpolation.serialize_vector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="morphology.html"
                        title="previous chapter">morphology module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plotting.html"
                        title="next chapter">plotting module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ndiminterpolation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="plotting module"
             >next</a> |</li>
        <li class="right" >
          <a href="morphology.html" title="morphology module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HyperCAT API 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, R. Nikutta.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.
    </div>
  </body>
</html>